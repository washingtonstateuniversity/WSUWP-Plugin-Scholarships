!function(){"use strict";var e=window.wp.blocks,t=window.wp.element;const{TextControl:a,SelectControl:s,PanelRow:l}=wp.components,{useState:r,useEffect:n}=wp.element;var c=function(e){const{label:l,help:r,attributes:n,setAttributes:c}=e;function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const a=new URL(t,e);return Boolean(a)&&(a.hostname.includes("wsu.edu")||a.hostname.includes(".local"))}catch(e){return!1}}return(0,t.createElement)("div",{className:"wsu-gutenberg-scholarships__data-source"},(0,t.createElement)(s,{label:l,help:r,value:n.data_source,options:[{label:"This Site",value:"local",disabled:!WSUWP_SCHOLARSHIPS_PLUGIN_DATA.postTypeEnabled},{label:"Custom",value:"custom"}],onChange:e=>c({data_source:e})}),"custom"===n.data_source&&(0,t.createElement)(a,{label:"Custom Data Source",help:"Site URL for to pull people data from.",placeholder:"https://example.wsu.edu",defaultValue:n.custom_data_source,onChange:e=>function(e){(""===e||o(e))&&c({custom_data_source:e})}(e)}),"custom"===n.data_source&&!o(n.custom_data_source)&&(0,t.createElement)("div",{className:"wsu-gutenberg-scholarships__data-source-notice notice notice-error notice-alt"},(0,t.createElement)("p",null,"Error: A valid data source is required.")))};const{useState:o,useEffect:i,useRef:u}=wp.element,{InspectorControls:m}=wp.blockEditor,{PanelBody:d}=wp.components;function h(e){let{className:a}=e;return(0,t.createElement)("svg",{className:`${a}`,role:"img",version:"1.1",viewBox:"0 0 70.2 69.6",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"m42.8 69.6s3.6-1.5 5.5-7.4c1 2.3 1.5 4.8 1.3 7.3-2.3 0.1-4.5 0.2-6.8 0.1zm14.9-11.8c-10.4 1.4-12.2-20.3-12.2-20.3s3.5 11.1 10.9 10.7c7.7-0.4 5.5-12.2 5.5-12.2s7.5 20.2-4.2 21.8zm-47.7-5c-3.3 1-6.6 1.8-10 2.4 0 0 5.9-4.5 10.3-18.3l4.3 3.9-0.8 2.6c1.1 1.5 1.9 3.1 2.5 4.9 1.6-3.6 1.5-7.7-0.3-11.2l-0.5 1.6-1.7-1.5-2.8-2.7c1.2-3.6 3-7 5.3-10.1l0.4 0.4 3.3 3.8-1 1.7c1.5 1.7 2.9 3.4 4.2 5.3 0.6-3.4 0.4-6.8-0.4-10.1l-1.5 1.4-3.6-4.2c4.5-4.7 10-8.2 16.2-10.3-0.4 0.4-0.7 0.8-1 1.3-2 2.9-4.1 8.1-2.4 16.4 0.3 1.3 0.7 3.2 1.1 5.1 0.9 3.8 1.9 8.2 2.2 10.9 0.7 5.7 0.1 9.4-1.8 11.4-1.3 1.4-3.5 2-6.4 1.9v-1.4c0-2.4-0.3-4.8-0.8-7.2l-0.8-2.7-1.2 2.6c-1.9 4.1-8.6 14.1-17.2 16.1 2.6-4.2 4.1-9 4.4-14zm25.4 16.4h-0.5-0.1-0.3c-0.5 0-0.8-0.1-1.2-0.1-0.7-0.1-1.6-0.2-2.6-0.4-6.4-1.1-12.9-1.7-19.4-2 6.2-3.6 10.4-9.9 12-12.5 0.2 1.3 0.3 2.5 0.3 3.8 0 0.8 0 1.6-0.1 2.2l-0.1 1.1 1.1 0.1c0.7 0.1 1.3 0.1 1.9 0.1 3.3 0 5.7-0.8 7.3-2.5 2.4-2.5 3.1-6.7 2.3-13.1-0.4-2.9-1.4-7.4-2.3-11.1-0.5-2-0.9-3.8-1.1-5-1.5-7.6 0.3-12.3 2.1-14.8 1.3-1.9 3.2-3.4 5.5-4.2h0.1l3.3-10.8h1.1l-2.3 10.3c0.7-0.1 1.2-0.2 1.7-0.3l3-9.5h1.1l-2 9.2c2.9-0.4 6.1-0.7 10.3-1 0.8 0.4 1.4 1.1 1.8 1.9l9.8-3 0.4 1.1-9.5 3.7c0.1 0.2 0.2 0.4 0.2 0.6l10.3-1.3 0.2 1.1-10 2c0 0.2 0.1 0.4 0.1 0.6l10.4 0.3v1.1l-10.2 0.4c0 1.2-0.2 2.4-0.5 3.6 0.6 2.1 0.7 4.3 0.3 6.5-1.7-3.9-3-5.1-3-5.1-1.4-0.7-2.9-1-4.5-1-2.5 0-4.8 1.1-6.4 2.9-2.3 2.6-3.5 6-3.3 9.5 0.2 2.4 0.7 5.1 1.4 8.6 0.7 3.6 1.6 8.1 2.3 13.5 0.6 4.1-0.1 7.3-1.8 9.7-1.6 2.1-4 3.4-6.5 3.8h-0.1-0.2-0.1-2.2zm10.4-51.5c-2.1-0.1-4.2 0.4-6 1.3-1.5 1-2.5 2.7-2.6 4.5-0.1 0.6-0.1 1.2 0 1.8 0.8-1.5 2-2.8 3.3-3.9 2.4-1.5 5.1-2.3 7.9-2.4h0.9 0.3c0.4 0 0.7-0.1 0.8-0.2 0-0.1-0.1-0.3-0.4-0.4-1.3-0.5-2.7-0.8-4.2-0.7z"}))}(0,e.registerBlockType)("wsuwp/scholarships-list",{title:"Scholarships",icon:"awards",category:"common",attributes:{data_source:{type:"string",default:"custom"},custom_data_source:{type:"string",default:""}},edit:e=>{const{className:a,attributes:s,setAttributes:l}=e,r="wsu-gutenberg-scholarships-list",n="custom"===s.data_source?s.custom_data_source:WSUWP_SCHOLARSHIPS_PLUGIN_DATA.siteUrl,{data:p,isLoading:_,error:E}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[a,s]=o({data:null,isLoading:!1,error:null}),l=u(null);return i((()=>(s({data:null,isLoading:!0,error:null}),l.current?.abort(),"undefined"!=typeof AbortController&&(l.current=new AbortController),t={...t,signal:l.current?.signal},(async()=>{try{console.log("Calling: "+e);const a=await fetch(e,t),l=await a.json();a.ok?s({data:l,isLoading:!1,error:null}):s({data:null,isLoading:!1,error:`${l.code} | ${l.message} ${a.status} (${a.statusText})`})}catch(e){s({data:null,isLoading:!1,error:e.message})}})(),()=>{l.current?.abort()})),[e]),a}(`${n}/wp-json/wsu-scholarships/v1/get-scholarships?postsPerPage=5`);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(m,null,(0,t.createElement)(d,{title:"Scholarships List Settings",initialOpen:!0},(0,t.createElement)(c,{label:"Data Source",help:"",attributes:s,setAttributes:l}))),(0,t.createElement)("div",{className:`${r} ${a}`},(0,t.createElement)("div",{className:`${r}__filters`},(0,t.createElement)("div",{className:`${r}__default-filters`},(0,t.createElement)("div",{className:`${r}__filter`},"- Current grade level -",(0,t.createElement)("span",{className:`${r}__filter-icon dashicons dashicons-arrow-down-alt2`})),(0,t.createElement)("div",{className:`${r}__filter`},"G.P.A."),(0,t.createElement)("div",{className:`${r}__filter`},"- Citizenship -",(0,t.createElement)("span",{className:`${r}__filter-icon dashicons dashicons-arrow-down-alt2`})),(0,t.createElement)("div",{className:`${r}__filter`},"- Residency -",(0,t.createElement)("span",{className:`${r}__filter-icon dashicons dashicons-arrow-down-alt2`}))),(0,t.createElement)("div",{className:`${r}__filters-toggle`},"Show filters",(0,t.createElement)("span",{className:`${r}__filters-toggle__icon`},"+"))),(0,t.createElement)("div",{className:`${r}__meta`},(0,t.createElement)("p",{className:`${r}__meta-icon`},(0,t.createElement)(h,{className:`${r}__coug-head`}),"= scholarships awarded by Washington State University."),(0,t.createElement)("p",{className:`${r}__meta-count`},p&&`${p.totalCount} scholarships found`)),(0,t.createElement)("div",{className:`${r}__table-container`},(0,t.createElement)("table",{className:`${r}__table wsu-table--style-striped`},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,(0,t.createElement)("span",{className:`${r}__sort-control is-active asc`},"Scholarship")),(0,t.createElement)("th",null,(0,t.createElement)("span",{className:`${r}__sort-control`},"Amount")),(0,t.createElement)("th",null,(0,t.createElement)("span",{className:`${r}__sort-control`},"Deadline")),(0,t.createElement)("th",null,(0,t.createElement)("span",{className:"wsu-screen-reader-only"},"Application")))),(0,t.createElement)("tbody",null,p&&(0,t.createElement)(t.Fragment,null,p.scholarships.map((e=>(0,t.createElement)("tr",{key:e.id},(0,t.createElement)("td",null,e.data.includes("tag-wsu")&&(0,t.createElement)(h,{className:`${r}__coug-head`}),(0,t.createElement)("a",{href:e.permalink,dangerouslySetInnerHTML:{__html:e.title}})),(0,t.createElement)("td",null,e.displayAmount),(0,t.createElement)("td",null,e.displayDeadline),(0,t.createElement)("td",null,e.applyLink&&(0,t.createElement)("a",{className:`${r}__apply-link`,href:e.applyLink},"Apply"))))),(0,t.createElement)("tr",null,(0,t.createElement)("td",null,"..."),(0,t.createElement)("td",null,"..."),(0,t.createElement)("td",null,"..."),(0,t.createElement)("td",null,"...")))))),_&&(0,t.createElement)("p",null,"loading..."),E&&(0,t.createElement)("p",null,"Error: Failed to load scholarships")))},save:function(){return null}});const{InspectorControls:p}=wp.blockEditor,{PanelBody:_}=wp.components;(0,e.registerBlockType)("wsuwp/scholarships-search",{title:"Scholarships Search",icon:"search",category:"common",attributes:{data_source:{type:"string",default:"custom"},custom_data_source:{type:"string",default:""}},edit:e=>{const{className:a,attributes:s,setAttributes:l}=e;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(p,null,(0,t.createElement)(_,{title:"Scholarships Search Settings",initialOpen:!0},(0,t.createElement)(c,{label:"Data Source",help:"",attributes:s,setAttributes:l}))),(0,t.createElement)("div",{className:`wsu-gutenberg-scholarships-search ${a}`},(0,t.createElement)("div",{className:"wsu-gutenberg-scholarships-search__filters"},(0,t.createElement)("div",{className:"wsu-gutenberg-scholarships-search__filter"},"Current grade level",(0,t.createElement)("span",{className:"wsu-gutenberg-scholarships-search__filter-icon dashicons dashicons-arrow-down-alt2"})),(0,t.createElement)("div",{className:"wsu-gutenberg-scholarships-search__filter"},"G.P.A."),(0,t.createElement)("div",{className:"wsu-gutenberg-scholarships-search__filter"},"Citizenship",(0,t.createElement)("span",{className:"wsu-gutenberg-scholarships-search__filter-icon dashicons dashicons-arrow-down-alt2"})),(0,t.createElement)("div",{className:"wsu-gutenberg-scholarships-search__filter"},"Residency",(0,t.createElement)("span",{className:"wsu-gutenberg-scholarships-search__filter-icon dashicons dashicons-arrow-down-alt2"})),(0,t.createElement)("div",{className:"wsu-gutenberg-scholarships-search__button"},"Go"))))},save:function(){return null}})}();